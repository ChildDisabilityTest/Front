{% extends "base.html" %} {% load static %}

<!-- css -->
{% block otherHead %}
<link href="{% static 'css/result.css' %}" rel="stylesheet" />
<link href="{% static 'css/lightbox.css' %}" rel="stylesheet" />
{% endblock otherHead %}

<!-- content -->
{% block content %}
<section id="top-area">
  <div class="container">
    <div class="row">
      <div class="col-md-12 main-title result-main-flex">
        <div class="result-main-title">경계성아동의 발달이해</div>
        <div class="result-main-title">검사 결과표</div>
      </div>
    </div>
  </div>
</section>

<section class="container" id="main">
  <!-- Start Survey container -->
  <div id="survey_container" class="result-container">
    <div id="middle-wizard">
      <div class="step step-padding">
        <!-- T점수 안내 -->
        <div class="twrap">
          <div>* T점수의 범위는 0점 ~ 100점 사이입니다.</div>
          <div>* T점수가 40점 이하이면 <strong>지연/낮음</strong>입니다.</div>
          <div>* T점수가 41점 ~ 59점이면 <strong>보통</strong>입니다.</div>
          <div>* T점수가 60점 이상이면 <strong>성숙/높음</strong>입니다.</div>
        </div>

        <!-- 발달지수  -->
        <div class="result-wrap">
          <div class="list-wrap">
            <div id="back-circle"></div>
            <div id="front-circle"></div>
            <div class="result-subtitle">발달지수</div>
          </div>

          <div class="chart-wrap">
            <div class="chart-show">
              <canvas id="radar-chart" data-url="{% url 'bar-chart' %}" height="120px"></canvas>
            </div>
            <div class="chart-bottom">
              <div>T점수</div>
            </div>
          </div>

          <!-- 코멘트 -->
          <div class="comment-wrap">
            <div class="comment-label">보통</div>
            <div class="comment-text">
              현재 연령 수준에서 적합하게 발달하고 있습니다. 일상에서 보다 칭찬을 많이 해주셔서 밝고
              건강하게 자랄 수 있도록 해주세요.
            </div>
          </div>
        </div>

        <!-- 자폐경향성 -->
        <div class="result-wrap">
          <div class="list-wrap">
            <div id="back-circle"></div>
            <div id="front-circle"></div>
            <div class="result-subtitle">자폐경향성</div>
          </div>

          <div class="chart-wrap">
            <div class="chart-show">
              <!-- <canvas id="autism-chart" data-url="{% url 'bar-chart' %}" height="120px"></canvas> -->
              <canvas id="autism-chart" height="120px"></canvas>
            </div>
            <div class="chart-bottom">
              <div>T점수</div>
            </div>
          </div>

          <!-- 코멘트 -->
          <div class="comment-wrap">
            <div class="comment-label">보통</div>
            <div class="comment-text">
              현재 연령 수준에서 적합하게 발달하고 있습니다. 일상에서 보다 칭찬을 많이 해주셔서 밝고
              건강하게 자랄 수 있도록 해주세요.
            </div>
          </div>
        </div>

        <!-- ADHD 경향성 -->
        <div class="result-wrap">
          <div class="list-wrap">
            <div id="back-circle"></div>
            <div id="front-circle"></div>
            <div class="result-subtitle">ADHD경향성</div>
          </div>

          <div class="chart-wrap">
            <div class="chart-show">
              <!-- <canvas id="adhd-chart" data-url="{% url 'bar-chart' %}" height="120px"></canvas> -->
              <canvas id="adhd-chart" height="120px"></canvas>
            </div>
            <div class="chart-bottom">
              <div>T점수</div>
            </div>
          </div>

          <!-- 코멘트 -->
          <div class="comment-wrap">
            <div class="comment-label">보통</div>
            <div class="comment-text">
              현재 연령 수준에서 적합하게 발달하고 있습니다. 일상에서 보다 칭찬을 많이 해주셔서 밝고
              건강하게 자랄 수 있도록 해주세요.
            </div>
          </div>
        </div>

        <!-- 기타 공지-->
        <div class="notice-wrap">
          <div class="d-flex gap-2">
            <div>
              <img src="{% static 'img/notice.png' %}" width="30px" class="test-info-img" />
            </div>
            <div>
              보다 자세한 결과상담을 원하신다면, 미사교심리연구소로 연락해 주세요. <br />
              E-mail: misakyo@naver.com <br />
              https://misakyo.com <br />
              https://blog.naver.com/misakyo
            </div>
          </div>

          <div class="d-flex gap-2">
            <div>
              <img src="{% static 'img/notice.png' %}" width="30px" class="test-info-img" />
            </div>
            <div>
              <a href="https://forms.gle/PN4caWJ9vhKvZB4A6"
                >발달장애아동의 발달이해 검사에 대한 만족도 조사</a
              >입니다. 3 분만 시간을 내주세요. 우리아이들에게 보다 도움이 될 수 있도록 개선해
              나아가겠습니다.
            </div>
          </div>
        </div>

        <!-- 카드뉴스 -->
        <div class="result-wrap">
          <div class="list-wrap">
            <div id="back-circle"></div>
            <div id="front-circle"></div>
            <div class="result-subtitle">검사결과 추천 카드뉴스</div>
          </div>
          <div class="card-news-text">검사결과에 맞는 콘텐츠를 확인해 보세요!</div>
          <div class="card-news-wrap">
            <!-- 랜덤 카드뉴스 6개 -->
            <div class="card-news-component" id="card-component-1"></div>
            <div class="card-news-component" id="card-component-2"></div>
            <div class="card-news-component" id="card-component-3"></div>
            <div class="card-news-component" id="card-component-4"></div>
            <div class="card-news-component" id="card-component-5"></div>
            <div class="card-news-component" id="card-component-6"></div>
          </div>
        </div>
        <br />
      </div>
    </div>
    <!-- end middle-wizard -->
  </div>
  <!-- end Survey container -->
</section>
<!-- end section main container -->

<!-- background polygons -->
<div id="bg-ring"></div>
<div id="bg-ring-triangle"></div>
<div id="bg-circle"></div>
<div id="bg-square"></div>

<input type="hidden" id="developValue" value="50" />

<!-- <script src="/static/js/drawGraph.js"></script> -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
<script src="{% static 'js/lightbox.js'%}"></script>

<!-- bar chart -->
<script>
  $(function () {
    var $rChart = $("#radar-chart");
    $.ajax({
      url: $rChart.data("url"), /// growthTest/bar-chart

      success: function (data) {
        var ctx = $rChart[0].getContext("2d");

        // data[0]: 발달지수, data[1]: 자폐경향성, data[2]: adhd경향성
        var data = data[1];

        var setColor;
        if (data.data < 41) {
          setColor = "rgba(227, 112, 112, 1.0)"; // 빨
        } else if (data.data < 60) {
          setColor = "rgba(98, 96, 198, 1.0)"; // 파
        } else {
          setColor = "rgba(110, 167, 108, 1.0)"; // 초
        }

        new Chart(ctx, {
          type: "bar",
          data: {
            datasets: [
              {
                label: "T점수", // 범례
                data: data.data, // 데이터
                barThickness: 25,
                backgroundColor: setColor,
              },
            ],
            labels: data.labels,
          },
          options: {
            indexAxis: "y",
            plugins: {
              legend: {
                // 범례(label)
                display: false,
                // position: "bottom",
              },
              datalabels: {
                display: false,
              },
              tooltip: {
                boxWidth: 25,
              },
            },
            scales: {
              x: {
                min: 0,
                max: 100,
              },
              y: {
                ticks: {
                  padding: 10,
                },
                grid: {
                  display: false,
                },
              },
            },
            responsive: true,
            maintainAspectRatio: false,
            animation: {
              duration: 2000,
            },
          },
        });
      },
    });
  });
</script>

<!-- OTHER JS -->
<script src="{% static 'js/jquery.bxslider.min.js'%}"></script>
<script src="{% static 'js/quantity-bt.js'%}"></script>
<script src="{% static 'js/bootstrap.js'%}"></script>
<script src="{% static 'js/retina.js'%}"></script>
<script type="module" src="{% static 'js/drawGraph.js'%}"></script>
<script src="{% static 'js/cardnews.js'%}"></script>

{% endblock content %}
